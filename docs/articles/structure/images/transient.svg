<?xml version="1.0" encoding="utf-8"?><svg xmlns:sc="https://github.com/svenboulanger/SimpleCircuit" width="2290" height="2030" viewBox="-50.28 -16 458.36 406.39" xmlns="http://www.w3.org/2000/svg"><style>g {
    stroke: black;
    stroke-width: 0.5pt;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
}
text { fill: black; stroke: none; }
.marker { fill: black; }
.dashed { stroke-dasharray: 2 2; }
.diagram { fill: white; }

.process path { fill: #fff7c3; }
.decision path { fill: #bfffcc; }
.terminator path { fill: #2393e2; }
.terminator text { fill: white; }
.io path { fill: #ffb0ac; }
#FTerror path { fill: #d72d00; }
.endcss</style><metadata><sc:version>1.8.4.0</sc:version></metadata><metadata><sc:script><![CDATA[
.css
.process path { fill: #fff7c3; }
.decision path { fill: #bfffcc; }
.terminator path { fill: #2393e2; }
.terminator text { fill: white; }
.io path { fill: #ffb0ac; }
#FTerror path { fill: #d72d00; }
.endcss
.property FP radius=3 width=100
.property FD rx=2 ry=5 width=100 height=30
.property FIO width=100 r=2
.property FT width=50 height=15
.property wire r=3
.variant X -dot

* Initialization
FT("Transient") <d arrow> FPop
FPop("Operating point\n(and initial conditions)") <d arrow> FPinit
FPinit("Use OP to initialize\ntime behaviors") <d arrow> FPaccept

* Main loop
FPaccept("Accept current time point") <d arrow> FPexport
FPexport("Export data") <d arrow> FPpredict
FPpredict("Predict timestep") <d arrow> FDend
FDend("Did we reach the end?") <r> DIR("Yes") <r arrow> FT("Finish")
FDend <d> DIR("No") <d arrow> FPprepare
FPprepare("Prepare for a new time point") <d arrow> FPprobe
FPprobe("Probe a new time point") <d arrow> FPiter
FPiter("Iterate") <d arrow> FDconv
FDconv("Did we converge?") <r> DIR("No") <r d arrow> FPreject
FDconv <d> DIR("Yes") <d arrow> FDtrunc
FDtrunc("Is the local truncation\nerror small enough?") <r> DIR("No") <r arrow> FPreject
FPreject("Reject the time point\nMake time step smaller") <r arrow> FDstep
FDstep("Is the timestep too small?") <u> DIR("No") <u l arrow> FPprobe
FDstep <d> DIR("Yes") <d arrow> FTerror("TimestepTooSmallException", width=100)
FDtrunc <d> DIR("Yes") <d +40 r +290 u l arrow> FPaccept

* Add behaviors
FIO1("ITimeBehavior list") <r dashed arrow> FPinit
FIO3("ITruncatingBehavior list") <r dashed +20 arrow> FPpredict
FIO3 <d dashed x dashed r arrow> FPprepare
X <d dashed r arrow> FDtrunc
FIO2("IAcceptBehavior list") <r dashed x r dashed arrow> FPaccept
X <d dashed jump r dashed arrow> FPprobe
(x FIO*)

]]></sc:script></metadata><g class="wire" id="w-1"><path class="wire" d="M117.13,0 v10" /><polygon class="marker arrow" points="118.13,7.5 117.13,10 116.13,7.5" /></g><g class="wire" id="w-2"><path class="wire" d="M117.13,25 v10" /><polygon class="marker arrow" points="118.13,32.5 117.13,35 116.13,32.5" /></g><g class="wire" id="w-3"><path class="wire" d="M117.13,50 v10" /><polygon class="marker arrow" points="118.13,57.5 117.13,60 116.13,57.5" /></g><g class="wire" id="w-4"><path class="wire" d="M117.13,75 v9.95" /><polygon class="marker arrow" points="118.13,82.45 117.13,84.95 116.13,82.45" /></g><g class="wire" id="w-5"><path class="wire" d="M117.13,99.95 v9.95" /><polygon class="marker arrow" points="118.13,107.4 117.13,109.9 116.13,107.4" /></g><g class="wire" id="w-6"><path class="wire" d="M117.13,124.9 v9.95" /><polygon class="marker arrow" points="118.13,132.35 117.13,134.85 116.13,132.35" /></g><g class="wire" id="w-7"><path class="wire" d="M167.13,149.85 h10" /></g><g class="wire" id="w-8"><path class="wire" d="M177.13,149.85 h10" /><polygon class="marker arrow" points="184.63,148.85 187.13,149.85 184.63,150.85" /></g><g class="wire" id="w-9"><path class="wire" d="M117.13,164.85 v9.95" /></g><g class="wire" id="w-10"><path class="wire" d="M117.13,174.79 v9.95" /><polygon class="marker arrow" points="118.13,182.24 117.13,184.74 116.13,182.24" /></g><g class="wire" id="w-11"><path class="wire" d="M117.13,199.74 v9.94" /><polygon class="marker arrow" points="118.13,207.17 117.13,209.67 116.13,207.17" /></g><g class="wire" id="w-12"><path class="wire" d="M117.13,224.67 v9.95" /><polygon class="marker arrow" points="118.13,232.12 117.13,234.62 116.13,232.12" /></g><g class="wire" id="w-13"><path class="wire" d="M117.13,249.62 v9.95" /><polygon class="marker arrow" points="118.13,257.07 117.13,259.57 116.13,257.07" /></g><g class="wire" id="w-14"><path class="wire" d="M167.13,274.57 h34.98" /></g><g class="wire" id="w-15"><path class="wire" d="M202.11,274.57 h31.98 C235.74,274.57 237.09,275.92 237.09,277.57 v39.39" /><polygon class="marker arrow" points="238.09,314.46 237.09,316.96 236.09,314.46" /></g><g class="wire" id="w-16"><path class="wire" d="M117.13,289.57 v9.94" /></g><g class="wire" id="w-17"><path class="wire" d="M117.13,299.52 v9.94" /><polygon class="marker arrow" points="118.13,306.96 117.13,309.46 116.13,306.96" /></g><g class="wire" id="w-18"><path class="wire" d="M167.13,324.46 h9.98" /></g><g class="wire" id="w-19"><path class="wire" d="M177.11,324.46 h9.98" /><polygon class="marker arrow" points="184.59,323.46 187.09,324.46 184.59,325.46" /></g><g class="wire" id="w-20"><path class="wire" d="M287.09,324.46 h9.98" /><polygon class="marker arrow" points="294.57,323.46 297.07,324.46 294.57,325.46" /></g><g class="wire" id="w-21"><path class="wire" d="M347.07,309.46 v-46.14" /></g><g class="wire" id="w-22"><path class="wire" d="M347.07,263.32 v-43.14 C347.07,218.52 345.73,217.17 344.07,217.17 h-176.94" /><polygon class="marker arrow" points="169.63,218.17 167.13,217.17 169.63,216.17" /></g><g class="wire" id="w-23"><path class="wire" d="M347.07,339.46 v10" /></g><g class="wire" id="w-24"><path class="wire" d="M347.07,349.46 v10" /><polygon class="marker arrow" points="348.07,356.96 347.07,359.46 346.07,356.96" /></g><g class="wire" id="w-25"><path class="wire" d="M117.13,339.46 v9.97" /></g><g class="wire" id="w-26"><path class="wire" d="M117.13,349.43 v36.96 C117.13,388.05 118.48,389.39 120.13,389.39 h283.95 C405.74,389.39 407.08,388.05 407.08,386.39 v-315.9 C407.08,68.84 405.74,67.5 404.08,67.5 h-236.95" /><polygon class="marker arrow" points="169.63,68.5 167.13,67.5 169.63,66.5" /></g><g class="wire dashed" id="w-27"><path class="wire dashed" d="M47.14,42.5 h19.99" /><polygon class="marker arrow" points="64.63,41.5 67.13,42.5 64.63,43.5" /></g><g class="wire dashed" id="w-28"><path class="wire dashed" d="M47.14,117.4 h19.99" /><polygon class="marker arrow" points="64.63,116.4 67.13,117.4 64.63,118.4" /></g><g class="wire dashed" id="w-29"><path class="wire dashed" d="M-0,124.24 v68" /></g><g class="wire dashed" id="w-30"><path class="wire dashed" d="M-0,192.24 h67.13" /><polygon class="marker arrow" points="64.63,191.24 67.13,192.24 64.63,193.24" /></g><g class="wire dashed" id="w-31"><path class="wire dashed" d="M-0,192.24 v129.23 C-0,322.26 0.32,323.02 0.88,323.58 1.44,324.15 2.2,324.46 3,324.46 h64.13" /><polygon class="marker arrow" points="64.63,323.46 67.13,324.46 64.63,325.46" /></g><g class="wire dashed" id="w-32"><path class="wire dashed" d="M47.14,67.5 h9.99" /></g><g class="wire dashed" id="w-33"><path class="wire dashed" d="M57.14,67.5 h10" /><polygon class="marker arrow" points="64.63,66.5 67.13,67.5 64.63,68.5" /></g><g class="wire dashed jump" id="w-34"><path class="wire dashed" d="M57.14,67.5 v48.4 C56.31,115.9 55.64,116.58 55.64,117.4 S56.31,118.9 57.14,118.9 v71.84 C56.31,190.74 55.64,191.41 55.64,192.24 S56.31,193.74 57.14,193.74 v20.44 C57.14,215.83 58.48,217.17 60.14,217.17 h7" /><polygon class="marker arrow" points="64.63,216.17 67.13,217.17 64.63,218.17" /></g><g class="terminator diagram" id="FT-1"><path d="M99.63,-15 h35 C138.77,-15 142.13,-11.64 142.13,-7.5 142.13,-3.36 138.77,0 134.63,0 h-35 C95.49,0 92.13,-3.36 92.13,-7.5 92.13,-11.64 95.49,-15 99.63,-15 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="105.86" y="-5.5">Transient</tspan></text></g><g class="process diagram" id="FPop"><path d="M70.13,10 h94 c1.66,0 3,1.34 3,3 v9 c0,1.66 -1.34,3 -3,3 h-94 c-1.66,0 -3,-1.34 -3,-3 v-9 c0,-1.66 1.34,-3 3,-3 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="98.65" y="16">Operating point</tspan><tspan style="font-family:Arial;font-size:4pt;" x="91.24" y="22">(and initial conditions)</tspan></text></g><g class="process diagram" id="FPinit"><path d="M70.13,35 h94 c1.66,0 3,1.34 3,3 v9 c0,1.66 -1.34,3 -3,3 h-94 c-1.66,0 -3,-1.34 -3,-3 v-9 c0,-1.66 1.34,-3 3,-3 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="94.6" y="41.5">Use OP to initialize</tspan><tspan style="font-family:Arial;font-size:4pt;" x="99.63" y="47.5">time behaviors</tspan></text></g><g class="process diagram" id="FPaccept"><path d="M70.13,60 h94 c1.66,0 3,1.34 3,3 v9 c0,1.66 -1.34,3 -3,3 h-94 c-1.66,0 -3,-1.34 -3,-3 v-9 c0,-1.66 1.34,-3 3,-3 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="87.4" y="69">Accept current time point</tspan></text></g><g class="process diagram" id="FPexport"><path d="M70.13,84.95 h94 c1.66,0 3,1.34 3,3 v9 c0,1.66 -1.34,3 -3,3 h-94 c-1.66,0 -3,-1.34 -3,-3 v-9 c0,-1.66 1.34,-3 3,-3 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="103.49" y="93.95">Export data</tspan></text></g><g class="process diagram" id="FPpredict"><path d="M70.13,109.9 h94 c1.66,0 3,1.34 3,3 v9 c0,1.66 -1.34,3 -3,3 h-94 c-1.66,0 -3,-1.34 -3,-3 v-9 c0,-1.66 1.34,-3 3,-3 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="98.01" y="118.9">Predict timestep</tspan></text></g><g class="decision diagram" id="FDend"><path d="M68.61,147.92 l47.21,-12.89 C116.68,134.79 117.59,134.79 118.45,135.02 l47.21,12.89 C166.53,148.15 167.13,148.94 167.13,149.85 167.13,150.75 166.53,151.54 165.66,151.78 l-47.21,12.89 C117.59,164.9 116.68,164.9 115.82,164.67 l-47.21,-12.89 C67.74,151.54 67.13,150.75 67.13,149.85 67.13,148.94 67.74,148.15 68.61,147.92" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="90.45" y="151.85">Did we reach the end?</tspan></text></g><g class="direction" id="DIR-2"><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="172.62" y="147.85">Yes</tspan></text></g><g class="terminator diagram" id="FT-3"><path d="M194.63,142.35 h35 C233.77,142.35 237.13,145.7 237.13,149.85 237.13,153.99 233.77,157.35 229.63,157.35 h-35 C190.49,157.35 187.13,153.99 187.13,149.85 187.13,145.7 190.49,142.35 194.63,142.35 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="205" y="151.85">Finish</tspan></text></g><g class="direction" id="DIR-4"><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="119.13" y="176.79">No</tspan></text></g><g class="process diagram" id="FPprepare"><path d="M70.13,184.74 h94 c1.66,0 3,1.34 3,3 v9 c0,1.66 -1.34,3 -3,3 h-94 c-1.66,0 -3,-1.34 -3,-3 v-9 c0,-1.66 1.34,-3 3,-3 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="83.4" y="193.74">Prepare for a new time point</tspan></text></g><g class="process diagram" id="FPprobe"><path d="M70.13,209.67 h94 c1.66,0 3,1.34 3,3 v9 c0,1.66 -1.34,3 -3,3 h-94 c-1.66,0 -3,-1.34 -3,-3 v-9 c0,-1.66 1.34,-3 3,-3 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="89.62" y="218.67">Probe a new time point</tspan></text></g><g class="process diagram" id="FPiter"><path d="M70.13,234.62 h94 c1.66,0 3,1.34 3,3 v9 c0,1.66 -1.34,3 -3,3 h-94 c-1.66,0 -3,-1.34 -3,-3 v-9 c0,-1.66 1.34,-3 3,-3 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="109.56" y="244.12">Iterate</tspan></text></g><g class="decision diagram" id="FDconv"><path d="M68.61,272.64 l47.21,-12.89 C116.68,259.51 117.59,259.51 118.45,259.75 l47.21,12.89 C166.53,272.88 167.13,273.67 167.13,274.57 167.13,275.47 166.53,276.26 165.66,276.5 l-47.21,12.89 C117.59,289.63 116.68,289.63 115.82,289.4 l-47.21,-12.89 C67.74,276.26 67.13,275.47 67.13,274.57 67.13,273.67 67.74,272.88 68.61,272.64" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="95.78" y="276.07">Did we converge?</tspan></text></g><g class="direction" id="DIR-5"><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="198.69" y="272.57">No</tspan></text></g><g class="process diagram" id="FPreject"><path d="M190.09,316.96 h94 c1.66,0 3,1.34 3,3 v9 c0,1.66 -1.34,3 -3,3 h-94 c-1.66,0 -3,-1.34 -3,-3 v-9 c0,-1.66 1.34,-3 3,-3 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="212.53" y="322.96">Reject the time point</tspan><tspan style="font-family:Arial;font-size:4pt;" x="209.58" y="328.96">Make time step smaller</tspan></text></g><g class="direction" id="DIR-6"><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="119.13" y="301.52">Yes</tspan></text></g><g class="decision diagram" id="FDtrunc"><path d="M68.61,322.53 l47.21,-12.89 C116.68,309.4 117.59,309.4 118.45,309.64 l47.21,12.89 C166.53,322.77 167.13,323.56 167.13,324.46 167.13,325.36 166.53,326.15 165.66,326.39 l-47.21,12.89 C117.59,339.52 116.68,339.52 115.82,339.29 l-47.21,-12.89 C67.74,326.15 67.13,325.36 67.13,324.46 67.13,323.56 67.74,322.77 68.61,322.53" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="91.93" y="322.96">Is the local truncation</tspan><tspan style="font-family:Arial;font-size:4pt;" x="93.41" y="328.96">error small enough?</tspan></text></g><g class="direction" id="DIR-7"><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="173.69" y="322.46">No</tspan></text></g><g class="decision diagram" id="FDstep"><path d="M298.54,322.53 l47.21,-12.89 C346.61,309.4 347.52,309.4 348.39,309.64 l47.21,12.89 C396.47,322.77 397.07,323.56 397.07,324.46 397.07,325.36 396.47,326.15 395.6,326.39 l-47.21,12.89 C347.52,339.52 346.61,339.52 345.75,339.29 l-47.21,-12.89 C297.67,326.15 297.07,325.36 297.07,324.46 297.07,323.56 297.67,322.77 298.54,322.53" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="316.83" y="325.96">Is the timestep too small?</tspan></text></g><g class="direction" id="DIR-8"><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="338.22" y="265.32">No</tspan></text></g><g class="direction" id="DIR-9"><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="349.07" y="351.46">Yes</tspan></text></g><g class="terminator diagram" id="FTerror"><path d="M304.57,359.46 h85 C393.71,359.46 397.07,362.82 397.07,366.96 397.07,371.1 393.71,374.46 389.57,374.46 h-85 C300.43,374.46 297.07,371.1 297.07,366.96 297.07,362.82 300.43,359.46 304.57,359.46 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="313.53" y="368.46">TimestepTooSmallException</tspan></text></g><g class="direction" id="DIR-10"><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="119.13" y="351.43">Yes</tspan></text></g><g class="io diagram" id="FIO1"><path d="M-47.18,49.34 C-47.83,49.34 -48.44,49.02 -48.81,48.49 -49.19,47.97 -49.28,47.29 -49.07,46.68 l3.85,-11 C-44.94,34.87 -44.18,34.34 -43.33,34.34 h90.51 C47.83,34.34 48.44,34.65 48.81,35.18 49.19,35.71 49.28,36.39 49.07,37 l-3.85,11 C44.94,48.8 44.18,49.34 43.33,49.34 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="-21.34" y="43.84">ITimeBehavior list</tspan></text></g><g class="io diagram" id="FIO3"><path d="M-47.18,124.24 C-47.83,124.24 -48.44,123.93 -48.81,123.4 -49.19,122.87 -49.28,122.19 -49.07,121.58 l3.85,-11 C-44.94,109.78 -44.18,109.24 -43.33,109.24 h90.51 C47.83,109.24 48.44,109.55 48.81,110.08 49.19,110.61 49.28,111.29 49.07,111.9 l-3.85,11 C44.94,123.7 44.18,124.24 43.33,124.24 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="-28.01" y="118.24">ITruncatingBehavior list</tspan></text></g><g class="io diagram" id="FIO2"><path d="M-47.18,74.34 C-47.83,74.34 -48.44,74.02 -48.81,73.49 -49.19,72.97 -49.28,72.29 -49.07,71.68 l3.85,-11 C-44.94,59.87 -44.18,59.34 -43.33,59.34 h90.51 C47.83,59.34 48.44,59.65 48.81,60.18 49.19,60.71 49.28,61.39 49.07,62 l-3.85,11 C44.94,73.8 44.18,74.34 43.33,74.34 Z" /><text class="lbl"><tspan style="font-family:Arial;font-size:4pt;" x="-23.66" y="68.34">IAcceptBehavior list</tspan></text></g></svg>